let axios,cheerio,db;_696‍.x([["getWorldTotal",()=>getWorldTotal],["getWorldInformation",()=>getWorldInformation],["getTotalConfirmed",()=>getTotalConfirmed],["getTotalRecovered",()=>getTotalRecovered],["getTotalDeaths",()=>getTotalDeaths],["getCountryData",()=>getCountryData],["runCron",()=>runCron]]);_696‍.w("axios",[["default",["axios"],function(v){axios=v}]]);_696‍.w("cheerio",[["default",["cheerio"],function(v){cheerio=v}]]);_696‍.w("./db",[["default",["db"],function(v){db=v}]]);


async function getHTML(url) {
  const { data: html } = await axios.get(url);
  return html;
}

       async function getWorldTotal(html) {}

       async function getWorldInformation() {
  const html = await getHTML("https://news.google.com/covid19/map");
  const $ = cheerio.load(html);
  const c = $(".qs41qe .UvMayb");
  const r = $(".gZvxhb .UvMayb");
  const d = $(".ckqIZ .UvMayb");

  const data = { confirmed: c, recovered: r, deaths: d };
  return data;
}

       async function getTotalConfirmed(country) {
  const html = await getHTML(`https://news.google.com/covid19/map?${country}`);
  const $ = cheerio.load(html);
  const div = $(".qs41qe .UvMayb");
  return div.text();
}

       async function getTotalRecovered(country) {
  const html = await getHTML(`https://news.google.com/covid19/map?${country}`);
  const $ = cheerio.load(html);
  const div = $(".gZvxhb .UvMayb");
  return div.html();
}

       async function getTotalDeaths(country) {
  const html = await getHTML(`https://news.google.com/covid19/map?${country}`);
  const $ = cheerio.load(html);
  const div = $(".ckqIZ .UvMayb");
  return div.html();
}

       async function getCountryData(country) {
  const html = await getHTML(`https://news.google.com/covid19/map`);

  const $ = cheerio.load(html);
  const element = $(
    "tr.sgXwHf:nth-child(133) > th:nth-child(1) > div:nth-child(1) > div:nth-child(2)"
  );
  _696‍.g.console.log(element);
  // const div = $("tr.wdLSAe");
  // div.each((index, element) => {
  //   console.log($(element).text);

  //   //   let name = $($(element).find("th")[0]).text();
  //   //   let confirmed = $($(element).find("td")[0]).text();
  //   //   let recovered = $($(element).find("td")[3]).text();
  //   //   let deaths = $($(element).find("td")[4]).text();

  //   //   db.get("searched")
  //   //     .push({
  //   //       name,
  //   //       confirmed,
  //   //       recovered,
  //   //       deaths,
  //   //     })
  //   //     .write();
  // });
}

       async function runCron() {
  const [c, r, d] = await Promise.all([
    getTotalConfirmed(),
    getTotalRecovered(),
    getTotalDeaths(),
  ]);

  db.get("worldwide").pop().write();

  db.get("worldwide")
    .push({
      date: Date.now(),
      confirmed: c,
      recovered: r,
      deaths: d,
    })
    .write();
  console.log("Done!");
}
